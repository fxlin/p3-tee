## How to add files to the qemu image

The final filesystem tree is at
``out-br/target/``
But it will be overwritten. 

The overlay filesystem is below, so add files and them do "make..."
``optee-qemuv8/build/br-ext/board/qemu/overlay/``


## Boot without typing username "root"
1/21/2024: DON'T DO THIS. IT CANNOT RUN init.d/ services, therefore no /procfs, /dev, etc.

cf: https://unix.stackexchange.com/questions/299408/how-to-login-automatically-without-typing-the-root-username-or-password-in-build

```
# add to /etc/inittab
::respawn:-/bin/login -f root
```

## Custom packages installation
The buildroot's configuration system/files are NOT in use, including: 

* buildroot/configs
* buildroot/.defconfig

(These are good places to look at possible options. Also can try "make menuconfig" which will change .defconfig)

Instead, the config are generated by scripts, cf: 

```
# build/common.mk
BR2_PACKAGE_OPENSSL ?= y
...
# xzl
BR2_PACKAGE_ZSH ?= y
BR2_PACKAGE_HTOP ?= y
BR2_PACKAGE_BASH ?= y     # for some reason, not working
```

Then do  "make..." 

The effective config is:
``out-br/defconfig``

## Automatic mount of shared fs
Create the mount point in the overlay fs: 

`mkdir -p optee-qemuv8/build/br-ext/board/qemu/overlay/root/shared`

Add to /etc/fstab (through buildroot overlay, see above):

```
# xzl: cf https://unix.stackexchange.com/questions/377325/how-to-mount-9p-drive-using-etc-fstab
host            /root/shared    9p      trans=virtio    0       0
```

The original fstab can be grabbed from
``out-br/target/etc/fstab``

After booting, from the normal world `mount -a`  (why still need this)

